# generated by claude sonnet 4 since cmake files make zero sense to me

cmake_minimum_required(VERSION 3.16)
project(CatboxUploader)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set(CURL_DIR "${CMAKE_CURRENT_SOURCE_DIR}/curl")

include_directories(${CURL_DIR}/include)
link_directories(${CURL_DIR}/lib)

add_executable(CatboxUploader src/main.cpp)

target_link_libraries(CatboxUploader 
    libcurl.dll.a
    ws2_32
    -static-libgcc
    -static-libstdc++
    -Wl,-Bstatic,--whole-archive -lwinpthread -Wl,--no-whole-archive
)

add_custom_command(TARGET CatboxUploader POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_if_different
    "${CURL_DIR}/bin/libcurl-x64.dll"
    $<TARGET_FILE_DIR:CatboxUploader>
    COMMAND ${CMAKE_COMMAND} -E copy_if_different
    "${CURL_DIR}/bin/curl-ca-bundle.crt"
    $<TARGET_FILE_DIR:CatboxUploader>
)
